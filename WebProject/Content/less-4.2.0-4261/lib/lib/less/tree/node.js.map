{"version":3,"file":"node.js","sourceRoot":"","sources":["../../../less/tree/node.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * The reason why Node is a class and other nodes simply do not extend\r\n * from Node (since we're transpiling) is due to this issue:\r\n *\r\n * @see https://github.com/less/less.js/issues/3434\r\n */\r\nvar Node = /** @class */ (function () {\r\n    function Node() {\r\n        this.parent = null;\r\n        this.visibilityBlocks = undefined;\r\n        this.nodeVisible = undefined;\r\n        this.rootNode = null;\r\n        this.parsed = null;\r\n    }\r\n    Object.defineProperty(Node.prototype, \"currentFileInfo\", {\r\n        get: function () {\r\n            return this.fileInfo();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Node.prototype, \"index\", {\r\n        get: function () {\r\n            return this.getIndex();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Node.prototype.setParent = function (nodes, parent) {\r\n        function set(node) {\r\n            if (node && node instanceof Node) {\r\n                node.parent = parent;\r\n            }\r\n        }\r\n        if (Array.isArray(nodes)) {\r\n            nodes.forEach(set);\r\n        }\r\n        else {\r\n            set(nodes);\r\n        }\r\n    };\r\n    Node.prototype.getIndex = function () {\r\n        return this._index || (this.parent && this.parent.getIndex()) || 0;\r\n    };\r\n    Node.prototype.fileInfo = function () {\r\n        return this._fileInfo || (this.parent && this.parent.fileInfo()) || {};\r\n    };\r\n    Node.prototype.isRulesetLike = function () { return false; };\r\n    Node.prototype.toCSS = function (context) {\r\n        var strs = [];\r\n        this.genCSS(context, {\r\n            // remove when genCSS has JSDoc types\r\n            // eslint-disable-next-line no-unused-vars\r\n            add: function (chunk, fileInfo, index) {\r\n                strs.push(chunk);\r\n            },\r\n            isEmpty: function () {\r\n                return strs.length === 0;\r\n            }\r\n        });\r\n        return strs.join('');\r\n    };\r\n    Node.prototype.genCSS = function (context, output) {\r\n        output.add(this.value);\r\n    };\r\n    Node.prototype.accept = function (visitor) {\r\n        this.value = visitor.visit(this.value);\r\n    };\r\n    Node.prototype.eval = function () { return this; };\r\n    Node.prototype._operate = function (context, op, a, b) {\r\n        switch (op) {\r\n            case '+': return a + b;\r\n            case '-': return a - b;\r\n            case '*': return a * b;\r\n            case '/': return a / b;\r\n        }\r\n    };\r\n    Node.prototype.fround = function (context, value) {\r\n        var precision = context && context.numPrecision;\r\n        // add \"epsilon\" to ensure numbers like 1.000000005 (represented as 1.000000004999...) are properly rounded:\r\n        return (precision) ? Number((value + 2e-16).toFixed(precision)) : value;\r\n    };\r\n    Node.compare = function (a, b) {\r\n        /* returns:\r\n         -1: a < b\r\n         0: a = b\r\n         1: a > b\r\n         and *any* other value for a != b (e.g. undefined, NaN, -2 etc.) */\r\n        if ((a.compare) &&\r\n            // for \"symmetric results\" force toCSS-based comparison\r\n            // of Quoted or Anonymous if either value is one of those\r\n            !(b.type === 'Quoted' || b.type === 'Anonymous')) {\r\n            return a.compare(b);\r\n        }\r\n        else if (b.compare) {\r\n            return -b.compare(a);\r\n        }\r\n        else if (a.type !== b.type) {\r\n            return undefined;\r\n        }\r\n        a = a.value;\r\n        b = b.value;\r\n        if (!Array.isArray(a)) {\r\n            return a === b ? 0 : undefined;\r\n        }\r\n        if (a.length !== b.length) {\r\n            return undefined;\r\n        }\r\n        for (var i = 0; i < a.length; i++) {\r\n            if (Node.compare(a[i], b[i]) !== 0) {\r\n                return undefined;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    Node.numericCompare = function (a, b) {\r\n        return a < b ? -1\r\n            : a === b ? 0\r\n                : a > b ? 1 : undefined;\r\n    };\r\n    // Returns true if this node represents root of ast imported by reference\r\n    Node.prototype.blocksVisibility = function () {\r\n        if (this.visibilityBlocks === undefined) {\r\n            this.visibilityBlocks = 0;\r\n        }\r\n        return this.visibilityBlocks !== 0;\r\n    };\r\n    Node.prototype.addVisibilityBlock = function () {\r\n        if (this.visibilityBlocks === undefined) {\r\n            this.visibilityBlocks = 0;\r\n        }\r\n        this.visibilityBlocks = this.visibilityBlocks + 1;\r\n    };\r\n    Node.prototype.removeVisibilityBlock = function () {\r\n        if (this.visibilityBlocks === undefined) {\r\n            this.visibilityBlocks = 0;\r\n        }\r\n        this.visibilityBlocks = this.visibilityBlocks - 1;\r\n    };\r\n    // Turns on node visibility - if called node will be shown in output regardless\r\n    // of whether it comes from import by reference or not\r\n    Node.prototype.ensureVisibility = function () {\r\n        this.nodeVisible = true;\r\n    };\r\n    // Turns off node visibility - if called node will NOT be shown in output regardless\r\n    // of whether it comes from import by reference or not\r\n    Node.prototype.ensureInvisibility = function () {\r\n        this.nodeVisible = false;\r\n    };\r\n    // return values:\r\n    // false - the node must not be visible\r\n    // true - the node must be visible\r\n    // undefined or null - the node has the same visibility as its parent\r\n    Node.prototype.isVisible = function () {\r\n        return this.nodeVisible;\r\n    };\r\n    Node.prototype.visibilityInfo = function () {\r\n        return {\r\n            visibilityBlocks: this.visibilityBlocks,\r\n            nodeVisible: this.nodeVisible\r\n        };\r\n    };\r\n    Node.prototype.copyVisibilityInfo = function (info) {\r\n        if (!info) {\r\n            return;\r\n        }\r\n        this.visibilityBlocks = info.visibilityBlocks;\r\n        this.nodeVisible = info.nodeVisible;\r\n    };\r\n    return Node;\r\n}());\r\nexports.default = Node;\r\n//# sourceMappingURL=node.js.map"]}