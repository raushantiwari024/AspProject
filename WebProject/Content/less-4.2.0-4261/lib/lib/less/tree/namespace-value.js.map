{"version":3,"file":"namespace-value.js","sourceRoot":"","sources":["../../../less/tree/namespace-value.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar node_1 = tslib_1.__importDefault(require(\"./node\"));\r\nvar variable_1 = tslib_1.__importDefault(require(\"./variable\"));\r\nvar ruleset_1 = tslib_1.__importDefault(require(\"./ruleset\"));\r\nvar selector_1 = tslib_1.__importDefault(require(\"./selector\"));\r\nvar NamespaceValue = function (ruleCall, lookups, index, fileInfo) {\r\n    this.value = ruleCall;\r\n    this.lookups = lookups;\r\n    this._index = index;\r\n    this._fileInfo = fileInfo;\r\n};\r\nNamespaceValue.prototype = Object.assign(new node_1.default(), {\r\n    type: 'NamespaceValue',\r\n    eval: function (context) {\r\n        var i, name, rules = this.value.eval(context);\r\n        for (i = 0; i < this.lookups.length; i++) {\r\n            name = this.lookups[i];\r\n            /**\r\n             * Eval'd DRs return rulesets.\r\n             * Eval'd mixins return rules, so let's make a ruleset if we need it.\r\n             * We need to do this because of late parsing of values\r\n             */\r\n            if (Array.isArray(rules)) {\r\n                rules = new ruleset_1.default([new selector_1.default()], rules);\r\n            }\r\n            if (name === '') {\r\n                rules = rules.lastDeclaration();\r\n            }\r\n            else if (name.charAt(0) === '@') {\r\n                if (name.charAt(1) === '@') {\r\n                    name = \"@\".concat(new variable_1.default(name.substr(1)).eval(context).value);\r\n                }\r\n                if (rules.variables) {\r\n                    rules = rules.variable(name);\r\n                }\r\n                if (!rules) {\r\n                    throw { type: 'Name',\r\n                        message: \"variable \".concat(name, \" not found\"),\r\n                        filename: this.fileInfo().filename,\r\n                        index: this.getIndex() };\r\n                }\r\n            }\r\n            else {\r\n                if (name.substring(0, 2) === '$@') {\r\n                    name = \"$\".concat(new variable_1.default(name.substr(1)).eval(context).value);\r\n                }\r\n                else {\r\n                    name = name.charAt(0) === '$' ? name : \"$\".concat(name);\r\n                }\r\n                if (rules.properties) {\r\n                    rules = rules.property(name);\r\n                }\r\n                if (!rules) {\r\n                    throw { type: 'Name',\r\n                        message: \"property \\\"\".concat(name.substr(1), \"\\\" not found\"),\r\n                        filename: this.fileInfo().filename,\r\n                        index: this.getIndex() };\r\n                }\r\n                // Properties are an array of values, since a ruleset can have multiple props.\r\n                // We pick the last one (the \"cascaded\" value)\r\n                rules = rules[rules.length - 1];\r\n            }\r\n            if (rules.value) {\r\n                rules = rules.eval(context).value;\r\n            }\r\n            if (rules.ruleset) {\r\n                rules = rules.ruleset.eval(context);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n});\r\nexports.default = NamespaceValue;\r\n//# sourceMappingURL=namespace-value.js.map"]}