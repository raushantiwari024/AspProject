{"version":3,"file":"unit.js","sourceRoot":"","sources":["../../../less/tree/unit.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar node_1 = tslib_1.__importDefault(require(\"./node\"));\r\nvar unit_conversions_1 = tslib_1.__importDefault(require(\"../data/unit-conversions\"));\r\nvar utils = tslib_1.__importStar(require(\"../utils\"));\r\nvar Unit = function (numerator, denominator, backupUnit) {\r\n    this.numerator = numerator ? utils.copyArray(numerator).sort() : [];\r\n    this.denominator = denominator ? utils.copyArray(denominator).sort() : [];\r\n    if (backupUnit) {\r\n        this.backupUnit = backupUnit;\r\n    }\r\n    else if (numerator && numerator.length) {\r\n        this.backupUnit = numerator[0];\r\n    }\r\n};\r\nUnit.prototype = Object.assign(new node_1.default(), {\r\n    type: 'Unit',\r\n    clone: function () {\r\n        return new Unit(utils.copyArray(this.numerator), utils.copyArray(this.denominator), this.backupUnit);\r\n    },\r\n    genCSS: function (context, output) {\r\n        // Dimension checks the unit is singular and throws an error if in strict math mode.\r\n        var strictUnits = context && context.strictUnits;\r\n        if (this.numerator.length === 1) {\r\n            output.add(this.numerator[0]); // the ideal situation\r\n        }\r\n        else if (!strictUnits && this.backupUnit) {\r\n            output.add(this.backupUnit);\r\n        }\r\n        else if (!strictUnits && this.denominator.length) {\r\n            output.add(this.denominator[0]);\r\n        }\r\n    },\r\n    toString: function () {\r\n        var i, returnStr = this.numerator.join('*');\r\n        for (i = 0; i < this.denominator.length; i++) {\r\n            returnStr += \"/\".concat(this.denominator[i]);\r\n        }\r\n        return returnStr;\r\n    },\r\n    compare: function (other) {\r\n        return this.is(other.toString()) ? 0 : undefined;\r\n    },\r\n    is: function (unitString) {\r\n        return this.toString().toUpperCase() === unitString.toUpperCase();\r\n    },\r\n    isLength: function () {\r\n        return RegExp('^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$', 'gi').test(this.toCSS());\r\n    },\r\n    isEmpty: function () {\r\n        return this.numerator.length === 0 && this.denominator.length === 0;\r\n    },\r\n    isSingular: function () {\r\n        return this.numerator.length <= 1 && this.denominator.length === 0;\r\n    },\r\n    map: function (callback) {\r\n        var i;\r\n        for (i = 0; i < this.numerator.length; i++) {\r\n            this.numerator[i] = callback(this.numerator[i], false);\r\n        }\r\n        for (i = 0; i < this.denominator.length; i++) {\r\n            this.denominator[i] = callback(this.denominator[i], true);\r\n        }\r\n    },\r\n    usedUnits: function () {\r\n        var group;\r\n        var result = {};\r\n        var mapUnit;\r\n        var groupName;\r\n        mapUnit = function (atomicUnit) {\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            if (group.hasOwnProperty(atomicUnit) && !result[groupName]) {\r\n                result[groupName] = atomicUnit;\r\n            }\r\n            return atomicUnit;\r\n        };\r\n        for (groupName in unit_conversions_1.default) {\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            if (unit_conversions_1.default.hasOwnProperty(groupName)) {\r\n                group = unit_conversions_1.default[groupName];\r\n                this.map(mapUnit);\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    cancel: function () {\r\n        var counter = {};\r\n        var atomicUnit;\r\n        var i;\r\n        for (i = 0; i < this.numerator.length; i++) {\r\n            atomicUnit = this.numerator[i];\r\n            counter[atomicUnit] = (counter[atomicUnit] || 0) + 1;\r\n        }\r\n        for (i = 0; i < this.denominator.length; i++) {\r\n            atomicUnit = this.denominator[i];\r\n            counter[atomicUnit] = (counter[atomicUnit] || 0) - 1;\r\n        }\r\n        this.numerator = [];\r\n        this.denominator = [];\r\n        for (atomicUnit in counter) {\r\n            // eslint-disable-next-line no-prototype-builtins\r\n            if (counter.hasOwnProperty(atomicUnit)) {\r\n                var count = counter[atomicUnit];\r\n                if (count > 0) {\r\n                    for (i = 0; i < count; i++) {\r\n                        this.numerator.push(atomicUnit);\r\n                    }\r\n                }\r\n                else if (count < 0) {\r\n                    for (i = 0; i < -count; i++) {\r\n                        this.denominator.push(atomicUnit);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.numerator.sort();\r\n        this.denominator.sort();\r\n    }\r\n});\r\nexports.default = Unit;\r\n//# sourceMappingURL=unit.js.map"]}