{"version":3,"file":"expression.js","sourceRoot":"","sources":["../../../less/tree/expression.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar node_1 = tslib_1.__importDefault(require(\"./node\"));\r\nvar paren_1 = tslib_1.__importDefault(require(\"./paren\"));\r\nvar comment_1 = tslib_1.__importDefault(require(\"./comment\"));\r\nvar dimension_1 = tslib_1.__importDefault(require(\"./dimension\"));\r\nvar anonymous_1 = tslib_1.__importDefault(require(\"./anonymous\"));\r\nvar Expression = function (value, noSpacing) {\r\n    this.value = value;\r\n    this.noSpacing = noSpacing;\r\n    if (!value) {\r\n        throw new Error('Expression requires an array parameter');\r\n    }\r\n};\r\nExpression.prototype = Object.assign(new node_1.default(), {\r\n    type: 'Expression',\r\n    accept: function (visitor) {\r\n        this.value = visitor.visitArray(this.value);\r\n    },\r\n    eval: function (context) {\r\n        var returnValue;\r\n        var mathOn = context.isMathOn();\r\n        var inParenthesis = this.parens;\r\n        var doubleParen = false;\r\n        if (inParenthesis) {\r\n            context.inParenthesis();\r\n        }\r\n        if (this.value.length > 1) {\r\n            returnValue = new Expression(this.value.map(function (e) {\r\n                if (!e.eval) {\r\n                    return e;\r\n                }\r\n                return e.eval(context);\r\n            }), this.noSpacing);\r\n        }\r\n        else if (this.value.length === 1) {\r\n            if (this.value[0].parens && !this.value[0].parensInOp && !context.inCalc) {\r\n                doubleParen = true;\r\n            }\r\n            returnValue = this.value[0].eval(context);\r\n        }\r\n        else {\r\n            returnValue = this;\r\n        }\r\n        if (inParenthesis) {\r\n            context.outOfParenthesis();\r\n        }\r\n        if (this.parens && this.parensInOp && !mathOn && !doubleParen\r\n            && (!(returnValue instanceof dimension_1.default))) {\r\n            returnValue = new paren_1.default(returnValue);\r\n        }\r\n        return returnValue;\r\n    },\r\n    genCSS: function (context, output) {\r\n        for (var i = 0; i < this.value.length; i++) {\r\n            this.value[i].genCSS(context, output);\r\n            if (!this.noSpacing && i + 1 < this.value.length) {\r\n                if (i + 1 < this.value.length && !(this.value[i + 1] instanceof anonymous_1.default) ||\r\n                    this.value[i + 1] instanceof anonymous_1.default && this.value[i + 1].value !== ',') {\r\n                    output.add(' ');\r\n                }\r\n            }\r\n        }\r\n    },\r\n    throwAwayComments: function () {\r\n        this.value = this.value.filter(function (v) {\r\n            return !(v instanceof comment_1.default);\r\n        });\r\n    }\r\n});\r\nexports.default = Expression;\r\n//# sourceMappingURL=expression.js.map"]}