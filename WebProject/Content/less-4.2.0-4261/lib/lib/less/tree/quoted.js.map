{"version":3,"file":"quoted.js","sourceRoot":"","sources":["../../../less/tree/quoted.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar node_1 = tslib_1.__importDefault(require(\"./node\"));\r\nvar variable_1 = tslib_1.__importDefault(require(\"./variable\"));\r\nvar property_1 = tslib_1.__importDefault(require(\"./property\"));\r\nvar Quoted = function (str, content, escaped, index, currentFileInfo) {\r\n    this.escaped = (escaped === undefined) ? true : escaped;\r\n    this.value = content || '';\r\n    this.quote = str.charAt(0);\r\n    this._index = index;\r\n    this._fileInfo = currentFileInfo;\r\n    this.variableRegex = /@\\{([\\w-]+)\\}/g;\r\n    this.propRegex = /\\$\\{([\\w-]+)\\}/g;\r\n    this.allowRoot = escaped;\r\n};\r\nQuoted.prototype = Object.assign(new node_1.default(), {\r\n    type: 'Quoted',\r\n    genCSS: function (context, output) {\r\n        if (!this.escaped) {\r\n            output.add(this.quote, this.fileInfo(), this.getIndex());\r\n        }\r\n        output.add(this.value);\r\n        if (!this.escaped) {\r\n            output.add(this.quote);\r\n        }\r\n    },\r\n    containsVariables: function () {\r\n        return this.value.match(this.variableRegex);\r\n    },\r\n    eval: function (context) {\r\n        var that = this;\r\n        var value = this.value;\r\n        var variableReplacement = function (_, name) {\r\n            var v = new variable_1.default(\"@\".concat(name), that.getIndex(), that.fileInfo()).eval(context, true);\r\n            return (v instanceof Quoted) ? v.value : v.toCSS();\r\n        };\r\n        var propertyReplacement = function (_, name) {\r\n            var v = new property_1.default(\"$\".concat(name), that.getIndex(), that.fileInfo()).eval(context, true);\r\n            return (v instanceof Quoted) ? v.value : v.toCSS();\r\n        };\r\n        function iterativeReplace(value, regexp, replacementFnc) {\r\n            var evaluatedValue = value;\r\n            do {\r\n                value = evaluatedValue.toString();\r\n                evaluatedValue = value.replace(regexp, replacementFnc);\r\n            } while (value !== evaluatedValue);\r\n            return evaluatedValue;\r\n        }\r\n        value = iterativeReplace(value, this.variableRegex, variableReplacement);\r\n        value = iterativeReplace(value, this.propRegex, propertyReplacement);\r\n        return new Quoted(this.quote + value + this.quote, value, this.escaped, this.getIndex(), this.fileInfo());\r\n    },\r\n    compare: function (other) {\r\n        // when comparing quoted strings allow the quote to differ\r\n        if (other.type === 'Quoted' && !this.escaped && !other.escaped) {\r\n            return node_1.default.numericCompare(this.value, other.value);\r\n        }\r\n        else {\r\n            return other.toCSS && this.toCSS() === other.toCSS() ? 0 : undefined;\r\n        }\r\n    }\r\n});\r\nexports.default = Quoted;\r\n//# sourceMappingURL=quoted.js.map"]}