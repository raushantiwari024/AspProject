{"version":3,"file":"color-blending.js","sourceRoot":"","sources":["../../../less/functions/color-blending.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar color_1 = tslib_1.__importDefault(require(\"../tree/color\"));\r\n// Color Blending\r\n// ref: http://www.w3.org/TR/compositing-1\r\nfunction colorBlend(mode, color1, color2) {\r\n    var ab = color1.alpha; // result\r\n    var // backdrop\r\n    cb;\r\n    var as = color2.alpha;\r\n    var // source\r\n    cs;\r\n    var ar;\r\n    var cr;\r\n    var r = [];\r\n    ar = as + ab * (1 - as);\r\n    for (var i = 0; i < 3; i++) {\r\n        cb = color1.rgb[i] / 255;\r\n        cs = color2.rgb[i] / 255;\r\n        cr = mode(cb, cs);\r\n        if (ar) {\r\n            cr = (as * cs + ab * (cb -\r\n                as * (cb + cs - cr))) / ar;\r\n        }\r\n        r[i] = cr * 255;\r\n    }\r\n    return new color_1.default(r, ar);\r\n}\r\nvar colorBlendModeFunctions = {\r\n    multiply: function (cb, cs) {\r\n        return cb * cs;\r\n    },\r\n    screen: function (cb, cs) {\r\n        return cb + cs - cb * cs;\r\n    },\r\n    overlay: function (cb, cs) {\r\n        cb *= 2;\r\n        return (cb <= 1) ?\r\n            colorBlendModeFunctions.multiply(cb, cs) :\r\n            colorBlendModeFunctions.screen(cb - 1, cs);\r\n    },\r\n    softlight: function (cb, cs) {\r\n        var d = 1;\r\n        var e = cb;\r\n        if (cs > 0.5) {\r\n            e = 1;\r\n            d = (cb > 0.25) ? Math.sqrt(cb)\r\n                : ((16 * cb - 12) * cb + 4) * cb;\r\n        }\r\n        return cb - (1 - 2 * cs) * e * (d - cb);\r\n    },\r\n    hardlight: function (cb, cs) {\r\n        return colorBlendModeFunctions.overlay(cs, cb);\r\n    },\r\n    difference: function (cb, cs) {\r\n        return Math.abs(cb - cs);\r\n    },\r\n    exclusion: function (cb, cs) {\r\n        return cb + cs - 2 * cb * cs;\r\n    },\r\n    // non-w3c functions:\r\n    average: function (cb, cs) {\r\n        return (cb + cs) / 2;\r\n    },\r\n    negation: function (cb, cs) {\r\n        return 1 - Math.abs(cb + cs - 1);\r\n    }\r\n};\r\nfor (var f in colorBlendModeFunctions) {\r\n    // eslint-disable-next-line no-prototype-builtins\r\n    if (colorBlendModeFunctions.hasOwnProperty(f)) {\r\n        colorBlend[f] = colorBlend.bind(null, colorBlendModeFunctions[f]);\r\n    }\r\n}\r\nexports.default = colorBlend;\r\n//# sourceMappingURL=color-blending.js.map"]}